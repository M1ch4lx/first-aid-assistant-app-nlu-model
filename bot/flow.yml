actions:
  - action: ask_what_happend
    message: "Jestem asystentem pierwszej pomocy, powiedz co się stało?"
    display: "Co się stało?"

  - action: ask_safety
    message: "Zanim podejdziesz, upewnij się, że miejsce jest bezpieczne (ruch uliczny, prąd, dym). Czy możesz bezpiecznie pomóc?"

  - action: ask_consciousness
    message: "Podejdź do poszkodowanego. Głośno zawołaj i delikatnie potrząśnij za ramiona. Czy reaguje?"

  - action: instruct_cpr
    message: "Rozpocznij reanimację: połóż splecione dłonie na środku klatki piersiowej. Uciskaj mocno 30 razy, a potem wykonaj 2 oddechy ratownicze. Czy wiesz jak to robić?"

  - action: instruct_recovery_position
    message: "Ułóż poszkodowanego w pozycji bocznej bezpiecznej. Monitoruj oddech do przyjazdu karetki."

  - action: answer_cpr_details
    message: "Wykonuj 30 uciśnięć (tempo 100-120/min, głębokość 5-6 cm) i 2 oddechy ratownicze. Powtarzaj ten cykl bez przerwy."

  - action: repeat

  - action: handle_panic
    message: "Spokojnie, pomogę Ci. Weź głęboki oddech. Najpierw powiedz: czy miejsce wokół Ciebie jest bezpieczne?"

rules:
  - rule: start_conversation
    steps:
    - intent: START
    - action: ask_what_happend

  - rule: found_unconscious
    steps:
    - intent: SITUATION_UNCONSCIOUS
    - action: ask_safety

  - rule: safety_confirmed
    steps:
    - intent: ASSESS_SAFETY
    - action: ask_consciousness

  - rule: no_breathing_detected
    steps:
    - intent: SITUATION_NOT_BREATHING
    - action: instruct_cpr

  - rule: procedure_cpr_trigger
    steps:
    - intent: PROCEDURE_CPR
    - action: instruct_cpr

  - rule: ask_how_many_cpr
    steps:
    - intent: QUANTITY_ASK
    - action: answer_cpr_details

  - rule: user_needs_repetition
    steps:
    - intent: REPEAT
    - action: repeat

  - rule: user_panicking
    steps:
    - intent: DONT_KNOW_WHAT_TO_DO
    - action: handle_panic